namespace = ANEX_tradegoods_event

country_event = { # Расчет десижена с товарами
	id = ANEX_tradegoods_event.1
	title = ANEX_setting_event.1.t
	desc = ANEX_setting_event.1.d
	picture = WESTERNISATION_eventPicture

	is_triggered_only = yes

	hidden = yes

	immediate = {
		log = "start ANEX_tradegoods_event.1 [GetDate] for country [Root.GetName]"
		#production
		
		update_goods = {
			GOODS = cannon
		}
		update_goods = {
			GOODS = metalworking
		}
		update_goods = {
			GOODS = munitions
		}
		update_goods = {
			GOODS = optics
		}
		update_goods = {
			GOODS = steam_engine
		}
		update_goods = {
			GOODS = leather
		}
		update_goods = {
			GOODS = woodworking
		}
		update_goods = {
			GOODS = jewellery
		}
		update_goods = {
			GOODS = uniforms
		}
		update_goods = {
			GOODS = beer
		}
		#raw
		update_goods = {
			GOODS = glass
		}
		update_goods = {
			GOODS = tin
		}
		update_goods = {
			GOODS = copper
		}
		update_goods = {
			GOODS = iron
		}
		update_goods = {
			GOODS = lead
		}
		update_goods = {
			GOODS = zinc
		}		
		update_goods = {
			GOODS = livestock
		}
		update_goods = {
			GOODS = grain
		}
		update_goods = {
			GOODS = wool
		}
		update_goods = {
			GOODS = cloth
		}
		update_goods = {
			GOODS = cotton
		}
		update_goods = {
			GOODS = amber
		}
		update_goods = {
			GOODS = pearls
		}
		update_goods = {
			GOODS = jade
		}
		update_goods = {
			GOODS = gems
		}
		update_goods = {
			GOODS = silver
		}
		update_goods = {
			GOODS = gold
		}
		update_goods = {
			GOODS = lumber
		}
		update_goods = {
			GOODS = fungi
		}
		if = {#cannon
			limit = {
				any_owned_province = {
					trade_goods = cannon
				}
			}
			every_owned_province = {
				limit = {
					trade_goods = cannon
				}
				last_know_goods = {
					GOODS = cannon
					value = 0
				}
				add_province_modifier = {
					name = not_enough_resources
					duration = -1
				}
				owner = {
					update_goods = {
						GOODS = cannon
					}
				}
				province_event = {
					id = ANEX_tradegoods_event.2
				}
			}
		}
		if = {#metalworking
			limit = {
				any_owned_province = {
					trade_goods = metalworking
				}
			}
			every_owned_province = {
				limit = {
					trade_goods = metalworking
				}
				last_know_goods = {
					GOODS = metalworking
					value = 0
				}
				add_province_modifier = {
					name = not_enough_resources
					duration = -1
				}
				owner = {
					update_goods = {
						GOODS = metalworking
					}
				}
				province_event = {
					id = ANEX_tradegoods_event.2
				}
			}
		}
		if = {#munitions
			limit = {
				any_owned_province = {
					trade_goods = munitions
				}
			}
			every_owned_province = {
				limit = {
					trade_goods = munitions
				}
				last_know_goods = {
					GOODS = munitions
					value = 0
				}
				add_province_modifier = {
					name = not_enough_resources
					duration = -1
				}
				owner = {
					update_goods = {
						GOODS = munitions
					}
				}
				province_event = {
					id = ANEX_tradegoods_event.2
				}
			}
		}
		if = {#steam_engine
			limit = {
				any_owned_province = {
					trade_goods = steam_engine
				}
			}
			every_owned_province = {
				limit = {
					trade_goods = steam_engine
				}
				last_know_goods = {
					GOODS = steam_engine
					value = 0
				}
				add_province_modifier = {
					name = not_enough_resources
					duration = -1
				}
				owner = {
					update_goods = {
						GOODS = steam_engine
					}
				}
				province_event = {
					id = ANEX_tradegoods_event.2
				}
			}
		}
		if = {#optics
			limit = {
				any_owned_province = {
					trade_goods = optics
				}
			}
			every_owned_province = {
				limit = {
					trade_goods = optics
				}
				last_know_goods = {
					GOODS = optics
					value = 0
				}
				add_province_modifier = {
					name = not_enough_resources
					duration = -1
				}
				owner = {
					update_goods = {
						GOODS = optics
					}
				}
				province_event = {
					id = ANEX_tradegoods_event.2
				}
			}
		}

		# country_event = {
		# 	id = ANEX_tradegoods_event.6
		# }
	}

	after = {
		log = "end ANEX_tradegoods_event.1 [GetDate] for country [Root.GetName]"
		
	}

	option = {
		name = ANEX_setting_event.1.a
		ai_chance = {
			factor = 1
		}
	}
}

province_event = { # Расчет возможности запуска спц мануфактуры
	id = ANEX_tradegoods_event.2
	title = ANEX_setting_event.1.t
	desc = ANEX_setting_event.1.d
	picture = WESTERNISATION_eventPicture

	trigger = {
		has_province_modifier = not_enough_resources
	}

	hidden = yes

	immediate = {
		log = "start ANEX_tradegoods_event.2 [GetDate] for province [Root.GetName]"
		if = {#cannon
			limit = {
				trade_goods = cannon
			}
			set_variable = {
				which = temp
				value = 0
			}
			set_variable = {
				which = temp
				which = last_normal_goods
			}
			settings_cannon =yes
			multiply_variable = {
				which = temp
				which = copper_need
			}
			set_variable = {
				which = copper_used
				which = temp
			}
			owner = {
				set_variable = {
					which = temp
					value = 0
				}
				set_variable = {
					which = temp
					which = PREV
				}
				change_variable = {
					which = copper_total_need
					which = temp
				}
			}
			set_variable = {
				which = temp
				value = 0
			}
			set_variable = {
				which = temp
				which = last_normal_goods
			}
			multiply_variable = {
				which = temp
				which = tin_need
			}
			set_variable = {
				which = tin_used
				which = temp
			}
			owner = {
				set_variable = {
					which = temp
					value = 0
				}
				set_variable = {
					which = temp
					which = PREV
				}
				change_variable = {
					which = tin_total_need
					which = temp
				}
			}
			set_variable = {
				which = copper
				value = 0
			}
			set_variable = {
				which = tin
				value = 0
			}
			owner = {
				ROOT = {
					change_variable = {
						which = copper
						which = PREV
					}
					change_variable = {
						which = tin
						which = PREV
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = copper
						which = copper_used
					}
				}
				if = {
					limit = {
						check_variable = {
							which = tin
							which = tin_used
						}
					}
					remove_province_modifier = not_enough_resources
					set_variable = {
						which = temp
						which = copper_used
					}
					owner = {
						update_goods = {
							GOODS = cannon
						}
						set_variable = {
							which = temp
							which = PREV
						}
						change_variable = {
							which = copper_used
							which = temp
						}
						subtract_variable = {
							which = copper
							which = temp
						}

					}
					set_variable = {
						which = temp
						which = tin_used
					}
					owner = {
						set_variable = {
							which = temp
							which = PREV
						}
						change_variable = {
							which = tin_used
							which = temp
						}
						subtract_variable = {
							which = tin
							which = temp
						}
					}
				}
			}
		}
		if = {#metalworking
			limit = {
				trade_goods = metalworking
			}
			set_variable = {
				which = temp
				value = 0
			}
			set_variable = {
				which = temp
				which = last_normal_goods
			}
			settings_metalworking =yes
			multiply_variable = {
				which = temp
				which = iron_need
			}
			set_variable = {
				which = iron_used
				which = temp
			}
			owner = {
				set_variable = {
					which = temp
					value = 0
				}
				set_variable = {
					which = temp
					which = PREV
				}
				change_variable = {
					which = iron_total_need
					which = temp
				}
			}
			set_variable = {
				which = iron
				value = 0
			}
			owner = {
				ROOT = {
					change_variable = {
						which = iron
						which = PREV
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = iron
						which = iron_used
					}
				}
				remove_province_modifier = not_enough_resources
				set_variable = {
					which = temp
					which = iron_used
				}
				owner = {
					update_goods = {
						GOODS = metalworking
					}
					set_variable = {
						which = temp
						which = PREV
					}
					change_variable = {
						which = iron_used
						which = temp
					}
					subtract_variable = {
						which = iron
						which = temp
					}
				}
			}
		}
		if = {#munitions
			limit = {
				trade_goods = munitions
			}
			set_variable = {
				which = temp
				value = 0
			}
			set_variable = {
				which = temp
				which = last_normal_goods
			}
			settings_munitions = yes
			multiply_variable = {
				which = temp
				which = lead_need
			}
			set_variable = {
				which = lead_used
				which = temp
			}
			owner = {
				set_variable = {
					which = temp
					value = 0
				}
				set_variable = {
					which = temp
					which = PREV
				}
				change_variable = {
					which = lead_total_need
					which = temp
				}
			}
			set_variable = {
				which = lead
				value = 0
			}
			owner = {
				ROOT = {
					change_variable = {
						which = lead
						which = PREV
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = lead
						which = lead_used
					}
				}
				remove_province_modifier = not_enough_resources
				set_variable = {
					which = temp
					which = lead_used
				}
				owner = {
					update_goods = {
						GOODS = munitions
					}
					set_variable = {
						which = temp
						which = PREV
					}
					change_variable = {
						which = lead_used
						which = temp
					}
					subtract_variable = {
						which = lead
						which = temp
					}
				}
			}
		}
		if = {#steam_engine
			limit = {
				trade_goods = steam_engine
			}
			set_variable = {
				which = temp
				value = 0
			}
			set_variable = {
				which = zinc_used
				value = 0
			}
			set_variable = {
				which = copper_used
				value = 0
			}
			set_variable = {
				which = temp
				which = last_normal_goods
			}
			settings_steam_engine =yes
			multiply_variable = {
				which = temp
				which = copper_need_steam
			}

			set_variable = {
				which = copper_used
				which = temp
			}
			owner = {
				set_variable = {
					which = temp
					value = 0
				}
				set_variable = {
					which = temp
					which = PREV
				}
				change_variable = {
					which = copper_total_need
					which = temp
				}
			}
			set_variable = {
				which = temp
				value = 0
			}
			set_variable = {
				which = temp
				which = last_normal_goods
			}
			multiply_variable = {
				which = temp
				which = zinc_need
			}

			set_variable = {
				which = zinc_used
				which = temp
			}
			owner = {
				set_variable = {
					which = temp
					value = 0
				}
				set_variable = {
					which = temp
					which = PREV
				}
				change_variable = {
					which = zinc_total_need
					which = temp
				}
			}
			set_variable = {
				which = copper
				value = 0
			}
			set_variable = {
				which = zinc
				value = 0
			}
			owner = {
				ROOT = {
					change_variable = {
						which = copper
						which = PREV
					}
					change_variable = {
						which = zinc
						which = PREV
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = copper
						which = copper_used
					}
				}
				if = {
					limit = {
						check_variable = {
							which = zinc
							which = zinc_used
						}
					}
					remove_province_modifier = not_enough_resources
					set_variable = {
						which = temp
						value = 0
					}
					set_variable = {
						which = temp
						which = copper_used
					}

					owner = {
						update_goods = {
							GOODS = steam_engine
						}
						set_variable = {
							which = temp
							which = PREV
						}
						change_variable = {
							which = copper_used
							which = temp
						}
						subtract_variable = {
							which = copper
							which = temp
						}
					}
					set_variable = {
						which = temp
						which = zinc_used
					}
					owner = {
						set_variable = {
							which = temp
							which = PREV
						}
						change_variable = {
							which = zinc_used
							which = temp
						}
						subtract_variable = {
							which = zinc
							which = temp
						}
					}

				}
			}
		}
		if = {#optics
			limit = {
				trade_goods = optics
			}
			set_variable = {
				which = temp
				value = 0
			}
			set_variable = {
				which = temp
				which = last_normal_goods
			}
			settings_optics = yes
			multiply_variable = {
				which = temp
				which = glass_need
			}
			set_variable = {
				which = glass_used
				which = temp
			}
			owner = {
				set_variable = {
					which = temp
					value = 0
				}
				set_variable = {
					which = temp
					which = PREV
				}
				change_variable = {
					which = glass_total_need
					which = temp
				}
			}
			set_variable = {
				which = glass
				value = 0
			}
			owner = {
				ROOT = {
					change_variable = {
						which = glass
						which = PREV
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = glass
						which = glass_used
					}
				}
				remove_province_modifier = not_enough_resources
				set_variable = {
					which = temp
					which = glass_used
				}
				owner = {
					update_goods = {
						GOODS = optics
					}
					set_variable = {
						which = temp
						which = PREV
					}
					change_variable = {
						which = glass_used
						which = temp
					}
					subtract_variable = {
						which = glass
						which = temp
					}
				}
			}
		}

	}

	after = {
		log = "end ANEX_tradegoods_event.2 [GetDate] for province [Root.GetName]"
	}

	option = {
		name = ANEX_setting_event.1.a

		ai_chance = {
			factor = 1
		}
	}
}

country_event = {
	id = ANEX_tradegoods_event.3
	title = ANEX_setting_event.1.t
	desc = ANEX_setting_event.1.d
	picture = WESTERNISATION_eventPicture

	hidden = yes

	trigger = {
		was_player = yes
		OR = {
			had_country_flag = {
				flag = trade_goods_calc
				days = 180
			}
			NOT = {
				has_country_flag = trade_goods_calc
			}
		}
	}

	immediate = {
		log = "start ANEX_tradegoods_event.3 [GetDate] for country [Root.GetName]"
		clr_country_flag = trade_goods_calc
		set_country_flag = trade_goods_calc
		country_event = {
			id = ANEX_tradegoods_event.1
		}
		log = "end ANEX_tradegoods_event.3 [GetDate] for country [Root.GetName]"
	}

	option = {
		name = ANEX_setting_event.1.a

		ai_chance = {
			factor = 1
		}
	}
}

province_event = {
	id = ANEX_tradegoods_event.4
	title = ANEX_setting_event.1.t
	desc = ANEX_setting_event.1.d
	picture = WESTERNISATION_eventPicture

	hidden =yes

	trigger = {
		OR = {
			AND = {
				trade_goods = silver
				NOT = {
					has_province_modifier = silver_debuff
				}
			}
			AND = {
				has_province_modifier = silver_debuff
				NOT = {
					trade_goods = silver
				}
			}
		}
	}


	immediate = {
		log = "start ANEX_tradegoods_event.4 [GetDate] for province [Root.GetName]"
		if = {
			limit = {
				trade_goods = silver
				NOT = {
					has_province_modifier = silver_debuff
				}
			}
			add_province_modifier = {
				name = silver_debuff
				duration = -1
				hidden = yes
			}
		}
		if = {
			limit = {
				has_province_modifier = silver_debuff
				NOT = {
					trade_goods = silver
				}
			}
			remove_province_modifier = silver_debuff
		}
		log = "end ANEX_tradegoods_event.4 [GetDate] for province [Root.GetName]"
	}

	option = {
		name = ANEX_setting_event.1.a

		ai_chance = {
			factor = 1
		}
	}
}

province_event = {
	id = ANEX_tradegoods_event.5
	title = ANEX_tradegoods_event.5.t
	desc = ANEX_tradegoods_event.5.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture


	trigger = {
		has_building = mine
	}


	
	immediate = {
		FROM = { remove_building = mine }
	}

	option = {
		name = ANEX_tradegoods_event.5.a
		ai_chance = { factor = 75 }
		log = "start ANEX_tradegoods_event.5 [GetDate] for province [Root.GetName]"
		custom_tooltip = MINEs_tooltip
		hidden_effect = {
			random_list = {
				0 = {
					FROM = {
						add_province_modifier = {
							name = mine_fail
							duration = 3650
							desc = MINE_tooltip
						}
					}
				}
				100 = {
					random_list = {
						30 = {
							FROM = { change_trade_goods = copper }
						}
						30 = {
							FROM = { change_trade_goods = zinc }
						}
						15 = {
							FROM = { change_trade_goods = iron }
						}
						15 = {
							FROM = { change_trade_goods = lead }
						}
						5 = {
							random_list = {
								50 = { FROM = { change_trade_goods = silver } }
								50 = { FROM = { change_trade_goods = gold }	}
							}
						}
						5 = {
							FROM = { change_trade_goods = tin }
						}
					}

				}
			}
		}
		log = "end ANEX_tradegoods_event.5 [GetDate] for province [Root.GetName]"
	}
}

country_event = {
	id = ANEX_tradegoods_event.6
	title = ANEX_tradegoods_event.6.t
	desc = ANEX_tradegoods_event.6.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		set_country_flag = open_goods_menu
		log = "start ANEX_tradegoods_event.6 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.6 [GetDate] for country [Root.GetName]"
		
	}

	option = {#total raw
		name = ANEX_tradegoods_event.6.l
		country_event = {
			id = ANEX_tradegoods_event.7
		}
		ai_chance = { factor = 0}
	}

	option = {#cannon
		name = ANEX_tradegoods_event.6.a
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = cannon
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.8
		}
		ai_chance = { factor = 0}
	}
	option = {#metalworking
		name = ANEX_tradegoods_event.6.b
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = metalworking
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.9
		}
		ai_chance = { factor = 0}
	}
	option = {#munition
		name = ANEX_tradegoods_event.6.c
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = munitions
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.10
		}
		ai_chance = { factor = 0}
	}
	option = {#wood
		name = ANEX_tradegoods_event.6.q
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = woodworking
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.11
		}
		ai_chance = { factor = 0}
	}
	option = {#steaengine
		name = ANEX_tradegoods_event.6.w
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = steam_engine
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.12
		}
		ai_chance = { factor = 0}
	}
	option = {#optics
		name = ANEX_tradegoods_event.6.e
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = optics
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.13
		}
		ai_chance = { factor = 0}
	}
	option = {#leaterman
		name = ANEX_tradegoods_event.6.r
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = leather
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.14
		}
		ai_chance = { factor = 0}
	}
	option = {#beer
		name = ANEX_tradegoods_event.6.y
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = beer
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.15
		}
		ai_chance = { factor = 0}
	}
	option = {#rum
		name = ANEX_tradegoods_event.6.u
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = rum
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.16
		}
		ai_chance = { factor = 0}
	}
	option = {#palm_oil
		name = ANEX_tradegoods_event.6.i
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = palm_oil
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.17
		}
		ai_chance = { factor = 0}
	}
	option = {#olive_oil
		name = ANEX_tradegoods_event.6.o
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = olive_oil
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.18
		}
		ai_chance = { factor = 0}
	}
	option = {#gunpowder
		name = ANEX_tradegoods_event.6.p
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = gunpowder
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.19
		}
		ai_chance = { factor = 0}
	}
	option = {#cheese
		name = ANEX_tradegoods_event.6.s
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = cheese
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.20
		}
		ai_chance = { factor = 0}
	}
	option = {#carpet
		name = ANEX_tradegoods_event.6.f
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = carpet
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.21
		}
		ai_chance = { factor = 0}
	}
	option = {#maple_syrup
		name = ANEX_tradegoods_event.6.g
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = maple_syrup
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.22
		}
		ai_chance = { factor = 0}
	}
	option = {#champagne
		name = ANEX_tradegoods_event.6.h
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = champagne
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.23
		}
		ai_chance = { factor = 0}
	}
	option = {#uniforms
		name = ANEX_tradegoods_event.6.j
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = uniforms
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.24
		}
		ai_chance = { factor = 0}
	}
	option = {#jewellery
		name = ANEX_tradegoods_event.6.k
		# trigger = {
		# 	any_owned_province = {
		# 		trade_goods = jewellery
		# 	}
		# }
		country_event = {
			id = ANEX_tradegoods_event.25
		}
		ai_chance = { factor = 0}
	}
	option = {#back
		name = ANEX_tradegoods_event.6.z
		ai_chance = { factor = 1}
		clr_country_flag = open_goods_menu
	}
}

country_event = {
	id = ANEX_tradegoods_event.7
	title = ANEX_tradegoods_event.7.t
	desc = ANEX_tradegoods_event.7.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.7 [GetDate] for country [Root.GetName]"

	}

	after = {
		log = "end ANEX_tradegoods_event.7 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}

}

country_event = {
	id = ANEX_tradegoods_event.8
	title = ANEX_tradegoods_event.8.t
	desc = ANEX_tradegoods_event.8.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.8 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.8 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.9
	title = ANEX_tradegoods_event.9.t
	desc = ANEX_tradegoods_event.9.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.9 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.9 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.10
	title = ANEX_tradegoods_event.10.t
	desc = ANEX_tradegoods_event.10.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.10 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.10 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.11
	title = ANEX_tradegoods_event.11.t
	desc = ANEX_tradegoods_event.11.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.11 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.11 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.12
	title = ANEX_tradegoods_event.12.t
	desc = ANEX_tradegoods_event.12.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.12 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.12 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.13
	title = ANEX_tradegoods_event.13.t
	desc = ANEX_tradegoods_event.13.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.13 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.13 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.14
	title = ANEX_tradegoods_event.14.t
	desc = ANEX_tradegoods_event.14.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.14 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.14 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.15
	title = ANEX_tradegoods_event.15.t
	desc = ANEX_tradegoods_event.15.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.15 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.15 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.16
	title = ANEX_tradegoods_event.16.t
	desc = ANEX_tradegoods_event.16.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.16 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.16 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

# country_event = {
# 	id = ANEX_tradegoods_event.17
# 	title = ANEX_tradegoods_event.17.t
# 	desc = ANEX_tradegoods_event.17.d
# 	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

# 	is_triggered_only = yes
	
# 	immediate = {
# 		log = "start ANEX_tradegoods_event.17 [GetDate] for country [Root.GetName]"
# 	}

# 	after = {
# 		log = "end ANEX_tradegoods_event.17 [GetDate] for country [Root.GetName]"
# 	}

# 	option = {#back
# 		name = ANEX_tradegoods_event.6.z
# 		country_event = {
# 			id = ANEX_tradegoods_event.6
# 		}
# 		ai_chance = { factor = 75 }
# 	}
# }

country_event = {
	id = ANEX_tradegoods_event.17
	title = ANEX_tradegoods_event.17.t
	desc = ANEX_tradegoods_event.17.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.17 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.17 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.18
	title = ANEX_tradegoods_event.18.t
	desc = ANEX_tradegoods_event.18.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.18 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.18 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.19
	title = ANEX_tradegoods_event.19.t
	desc = ANEX_tradegoods_event.19.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.19 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.19 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.20
	title = ANEX_tradegoods_event.20.t
	desc = ANEX_tradegoods_event.20.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.20 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.20 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.21
	title = ANEX_tradegoods_event.21.t
	desc = ANEX_tradegoods_event.21.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.21 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.21 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.22
	title = ANEX_tradegoods_event.22.t
	desc = ANEX_tradegoods_event.22.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.22 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.22 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.23
	title = ANEX_tradegoods_event.23.t
	desc = ANEX_tradegoods_event.23.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.23 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.23 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.24
	title = ANEX_tradegoods_event.24.t
	desc = ANEX_tradegoods_event.24.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.24 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.24 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.25
	title = ANEX_tradegoods_event.25.t
	desc = ANEX_tradegoods_event.25.d
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes
	
	immediate = {
		log = "start ANEX_tradegoods_event.25 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.25 [GetDate] for country [Root.GetName]"
	}

	option = {#back
		name = ANEX_tradegoods_event.6.z
		country_event = {
			id = ANEX_tradegoods_event.6
		}
		ai_chance = { factor = 75 }
	}
}

country_event = {
	id = ANEX_tradegoods_event.100
	title = ANEX_tradegoods_event.100.t
	desc = ANEX_tradegoods_event.100.d
	picture = WESTERNISATION_eventPicture

	fire_only_once = yes

	major = yes

	trigger = {
		is_year = 1487
		production_leader = {
			trade_goods = apiculture
		}
	}

	mean_time_to_happen = {
		months = 6
	}

	immediate = {
		log = "start ANEX_tradegoods_event.100 [GetDate] for country [Root.GetName]"

	}

	after = {
		log = "end ANEX_tradegoods_event.100 [GetDate] for country [Root.GetName]"

	}

	option = {
		name = ANEX_tradegoods_event.100.a
		add_estate_church_loyalty_effect = yes
		change_price = {
			trade_goods = apiculture
			key = LACK_OF_CANDLE
			value = 0.15
			duration = -1
		}
		custom_tooltip = apiculture_buff
		tooltip = {
			add_base_production = 2
		}
		hidden_effect = {
			every_province = {
				limit = {
					trade_goods = apiculture
				}
				add_base_production = 2
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

country_event = {
	id = ANEX_tradegoods_event.101
	title = ANEX_tradegoods_event.101.t
	desc = ANEX_tradegoods_event.101.d
	picture = WESTERNISATION_eventPicture

	fire_only_once = yes

	major = yes

	trigger = {
		is_year = 1488
		production_leader = {
			trade_goods = apiculture
		}		
	}

	mean_time_to_happen = {
		months = 6
	}

	immediate = {
		log = "start ANEX_tradegoods_event.101 [GetDate] for country [Root.GetName]"

	}

	after = {
		log = "end ANEX_tradegoods_event.101 [GetDate] for country [Root.GetName]"

	}

	option = {
		name = ANEX_tradegoods_event.101.a
		add_adm_power = 35
		add_dip_power = 35
		add_years_of_income = 1.5

		ai_chance = {
			factor = 1
		}
	}
}


province_event = {
	id = ANEX_tradegoods_event.102
	title = ANEX_setting_event.1.t
	desc = ANEX_setting_event.1.d
	picture = WESTERNISATION_eventPicture

	fire_only_once = yes

	hidden = yes

	trigger = {
		is_year = 1520
		province_id = 1
		check_variable = {
			which = woodworking_workshop
			value = 15
		}
		any_country = {
			production_leader = {
				trade_goods = woodworking
			}
		}		
	}

	mean_time_to_happen = {
		months = 6
	}

	immediate = {
		log = "start ANEX_tradegoods_event.102 [GetDate] for country [Root.GetName]"
		every_country = {
			limit = {
				production_leader ={
					trade_goods = woodworking
				}
			}
			country_event = {
				id = ANEX_tradegoods_event.103
			}
		}
		every_country = {
			limit = {
				any_owned_province = {
					OR = {
						has_terrain = forest
						has_terrain = woods
					}
				}
			}
			country_event = {
				id = ANEX_tradegoods_event.104
				days = 100
				random = 100
			}
		}
	}

	after = {
		log = "end ANEX_tradegoods_event.102 [GetDate] for country [Root.GetName]"

	}

	option = {
		name = ANEX_setting_event.1.a
		ai_chance = {
			factor = 1
		}
	}
}


country_event = {
	id = ANEX_tradegoods_event.103
	title = ANEX_tradegoods_event.103.t
	desc = ANEX_tradegoods_event.103.d
	picture = WESTERNISATION_eventPicture

	fire_only_once = yes

	is_triggered_only = yes

	major = yes

	immediate = {
		log = "start ANEX_tradegoods_event.103 [GetDate] for country [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.103 [GetDate] for country [Root.GetName]"

	}

	option = {
		name = ANEX_tradegoods_event.103.a
		custom_tooltip = lumber_spread
		hidden_effect = {
			every_province = {
				limit = {
					OR = {
						has_terrain = woods
						has_terrain = forest
					}
				}
				random = {
					chance = 20
					change_trade_goods = lumber
				}
			}
		}		
		change_price = {
			trade_goods = woodworking
			key = POPULATION_WOOD
			value = 0.5
			duration = 16425
		}
		change_price = {
			trade_goods = lumber
			key = POPULATION_WOOD
			value = 0.35
			duration = 16425
		}
		ai_chance = {
			factor = 1
		}
	}
}


country_event = {
	id = ANEX_tradegoods_event.104
	title = ANEX_tradegoods_event.104.t
	desc = ANEX_tradegoods_event.104.d
	picture = WESTERNISATION_eventPicture


	is_triggered_only = yes

	immediate = {
		log = "start ANEX_tradegoods_event.104 [GetDate] for province [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.104 [GetDate] for province [Root.GetName]"
	}

	option = {
		name = ANEX_tradegoods_event.104.a
		custom_tooltip = lumber_spread
		hidden_effect = {
			every_owned_province = {
				limit = {
					OR = {
						has_terrain = woods
						has_terrain = forest
					}
				}
				random = {
					chance = 20
					change_trade_goods = lumber
				}
			}
		}
		every_owned_province = {
			limit = {
				trade_goods = lumber
			}
			add_province_modifier = {
				name = lumber_buff
				duration = -1
			}
		}
		set_country_flag = depletion
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = ANEX_tradegoods_event.104.b
		set_country_flag = not_depletion
		ai_chance = {
			factor = 1
		}
	}
}

country_event = {
	id = ANEX_tradegoods_event.105
	title = ANEX_tradegoods_event.105.t
	desc = ANEX_tradegoods_event.105.d
	picture = WESTERNISATION_eventPicture

	major = yes

	fire_only_once = yes

	trigger = {
		is_year = 1570
		any_owned_province = {
			has_province_modifier = lumber_buff
		}
	}

	mean_time_to_happen = {
		months = 6
	}

	immediate = {
		log = "start ANEX_tradegoods_event.105 [GetDate] for province [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.105 [GetDate] for province [Root.GetName]"
	}

	option = {
		name = ANEX_tradegoods_event.105.a
		change_price = {
			trade_goods = lumber
			key = INDUSTRIAL_LUMBER
			value = 0.2
			duration = -1
		}
		hidden_effect = {
			country_event = {
				id =  ANEX_tradegoods_event.106
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}

country_event = {
	id = ANEX_tradegoods_event.106
	title = ANEX_tradegoods_event.106.t
	desc = ANEX_tradegoods_event.106.d
	picture = WESTERNISATION_eventPicture

	trigger = {
		is_year = 1572
		any_owned_province = {
			trade_goods = lumber
		}
		OR = {
			has_country_flag = depletion
			has_country_flag = not_depletion
		}
	}

	mean_time_to_happen = {
		months = 6
	}

	immediate = {
		log = "start ANEX_tradegoods_event.106 [GetDate] for province [Root.GetName]"
	}

	after = {
		log = "end ANEX_tradegoods_event.106 [GetDate] for province [Root.GetName]"
	}

	option = {
		name = ANEX_tradegoods_event.106.a
		trigger = {
			has_country_flag = depletion
		}
		every_owned_province = {
			limit = {
				trade_goods = lumber
			}
			remove_province_modifier = lumber_buff
			random = {
				chance = 55
				change_trade_goods = unknown
			}
			if = {
				limit = {
					trade_goods = lumber
				}
				add_province_modifier = {
					name = lumber_debuff
					duration = 21900
				}
			}
		}
		every_owned_province = {
			limit = {
				trade_goods = woodworking
			}
			add_province_modifier = {
				name = woodworking_debuff
				duration = 21900
			}
		}
		
		ai_chance = {
			factor = 1
		}
	}

	
	option = {
		name = ANEX_tradegoods_event.106.b
		trigger = {
			has_country_flag = not_depletion
		}
		custom_tooltip = low_lumber
		hidden_effect = {
			every_owned_province = {
				limit = {
					trade_goods = lumber
				}
				random = {
					chance = 15
					change_trade_goods = unknown
				}
			}
		}		
		ai_chance = {
			factor = 1
		}
	}

}
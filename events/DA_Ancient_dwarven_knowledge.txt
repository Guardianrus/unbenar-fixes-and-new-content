
namespace = DA_adk

province_event = {
	id = DA_adk.2
	title = DA_adk.2.t
	desc = DA_adk.2.d
	picture = COUNTRY_COLLAPSE_eventPicture
	
	trigger = {
		has_owner_culture = yes
		culture_group = dwarven
		is_capital = yes
		has_province_flag = DA_Expanded_dig_adk_2
		unrest = 5
		owner = {
			NOT = { has_country_modifier = DA_AI_accident_CD }
		}
	}	
	immediate = {
		hidden_effect = {
			owner = {
				add_country_modifier = {
					name = DA_AI_accident_CD
					duration = 365
					hidden = yes
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 60
		modifier = {
			factor = 0.4
			unrest = 10
		}
		modifier = {
			factor = 0.6
			unrest = 15
		}
		modifier = {
			factor = 0.8
			NOT = { owner = { stability = 0 }  }
		}
	}

	option = {
		name = DA_adk.2.a
		owner = {
			add_adm_power = -20
			add_years_of_income = -0.05
		}
	}
}

country_event = {
	id = DA_adk.3 # bluild/expand research facility
	title = "DA_adk.3.t"
	desc = {
		trigger = { capital_scope = { NOT = { has_province_flag = DA_Expanded_dig_adk_2 } } }
		desc = "DA_adk.3.d1"
	}
	desc = {
		trigger = { capital_scope = { has_province_flag = DA_Expanded_dig_adk_2 } }
		desc = "DA_adk.3.d2"
	}
	picture = DA_research_facility_eventPicture

	is_triggered_only = yes
	
	option = {
		name = "DA_adk.3.a"
		
		if = {
			limit = {
				capital_scope = {
					DA_Expandable_dig_2 = yes
				}
			}
			capital_scope = {
				set_province_flag = DA_Expanded_dig_adk_2
				hidden_effect = {
					add_permanent_province_modifier = {
						name = DA_local_research_facility_2
						duration = -1
					}
				}
			}
			add_treasury = -100
			custom_tooltip = DA_Expand_dig_2_tooltip
		}
		else_if = {
			limit = {
				capital_scope = {
					DA_Expandable_dig_3 = yes
				}
			}
			capital_scope = {
				set_province_flag = DA_Expanded_dig_adk_3
				hidden_effect = {
					remove_province_modifier = DA_local_research_facility_2
					add_permanent_province_modifier = {
						name = DA_local_research_facility_3
						duration = -1
					}
				}
			}
			add_treasury = -200
			custom_tooltip = DA_Expand_dig_3_tooltip
		}
		else_if = {
			limit = {
				capital_scope = {
					DA_Expandable_dig_4 = yes
				}
			}
			capital_scope = {
				set_province_flag = DA_Expanded_dig_adk_4
				hidden_effect = {
					remove_province_modifier = DA_local_research_facility_3
					add_permanent_province_modifier = {
						name = DA_local_research_facility_4
						duration = -1
					}
				}
			}
			add_treasury = -300
			custom_tooltip = DA_Expand_dig_4_tooltip

		}
		else_if = {
			limit = {
				capital_scope = {
					DA_Expandable_dig_5 = yes
				}
			}
			capital_scope = {
				set_province_flag = DA_Expanded_dig_adk_5
				hidden_effect = {
					remove_province_modifier = DA_local_research_facility_4
					add_permanent_province_modifier = {
						name = DA_local_research_facility_5
						duration = -1
					}
				}
			}
			add_treasury = -600
			custom_tooltip = DA_Expand_dig_5_tooltip
		}
		else_if = {
			limit = {
				capital_scope = {
					DA_Expandable_dig_6 = yes
				}
			}
			capital_scope = {
				set_province_flag = DA_Expanded_dig_adk_6
				hidden_effect = {
					remove_province_modifier = DA_local_research_facility_5
					add_permanent_province_modifier = {
						name = DA_local_research_facility_6
						duration = -1
					}
				}
			}
			add_treasury = -1000
			custom_tooltip = DA_Expand_dig_6_tooltip
		}
		else_if = {
			limit = {
				capital_scope = {
					DA_Expandable_dig_7 = yes
				}
			}
			capital_scope = {
				set_province_flag = DA_Expanded_dig_adk_7
				hidden_effect = {
					remove_province_modifier = DA_local_research_facility_6
					add_permanent_province_modifier = {
						name = DA_local_research_facility_7
						duration = -1
					}
				}
			}
			add_treasury = -1500
			custom_tooltip = DA_Expand_dig_7_tooltip
		}
		else_if = {
			limit = {
				capital_scope = {
					DA_Expandable_dig_8 = yes
				}
			}
			capital_scope = {
				set_province_flag = DA_Expanded_dig_adk_8
				hidden_effect = {
					remove_province_modifier = DA_local_research_facility_7
					add_permanent_province_modifier = {
						name = DA_local_research_facility_8
						duration = -1
					}
				}
			}
			add_treasury = -2000
			custom_tooltip = DA_Expand_dig_8_tooltip
		}
		else_if = {
			limit = {
				capital_scope = {
					DA_Expandable_dig_9 = yes
				}
			}
			capital_scope = {
				set_province_flag = DA_Expanded_dig_adk_9
				hidden_effect = {
					remove_province_modifier = DA_local_research_facility_8
					add_permanent_province_modifier = {
						name = DA_local_research_facility_9
						duration = -1
					}
				}
			}
			add_treasury = -5000
			custom_tooltip = DA_Expand_dig_9_tooltip
		}
		else_if = {
			limit = {
				capital_scope = {
					DA_Expandable_dig_10 = yes
				}
			}
			capital_scope = {
				set_province_flag = DA_Expanded_dig_adk_10
				hidden_effect = {
					remove_province_modifier = DA_local_research_facility_9
					add_permanent_province_modifier = {
						name = DA_local_research_facility_10
						duration = -1
					}
				}
			}
			add_treasury = -10000
			custom_tooltip = DA_Expand_dig_10_tooltip
		}
		else_if = {
			limit = {
				capital_scope = {
					DA_Expandable_dig_11 = yes
				}
			}
			capital_scope = {
				set_province_flag = DA_Expanded_dig_adk_11
				hidden_effect = {
					remove_province_modifier = DA_local_research_facility_10
					add_permanent_province_modifier = {
						name = DA_local_research_facility_11
						duration = -1
					}
				}
			}
			add_treasury = -20000
			custom_tooltip = DA_Expand_dig_11_tooltip
		}
		else = {
			add_treasury = -500
			add_prestige = 10
		}
	}
	after = {
		hidden_effect = {
			clr_country_flag = DA_rf_menu_in_use
		}
	}
}


country_event = {
	id = DA_adk.4 #research facility periodical adk
	title = "DA_adk.4.t"
	desc = "DA_adk.4.d"
	picture = INVENTION_eventPicture

	trigger = {
		culture_group = dwarven
		NOT = { has_country_modifier = DA_periodical_nat_ADK_CD }
		capital_scope = {
			has_province_flag = DA_Expanded_dig_adk_2
		}	
	}	
	immediate = {
		hidden_effect = {
			add_country_modifier = {
				name = DA_periodical_nat_ADK_CD
				duration = 730
				hidden = yes
			}
		}
	}
	
	mean_time_to_happen = {
		months = 140
		modifier = {
			factor = 0.9
			innovativeness = 30
		}
		modifier = {
			factor = 0.9
			innovativeness = 50
		}
		modifier = {
			factor = 0.9
			innovativeness = 70
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
	}

	option = {
		name = "DA_adk.4.a"
		if = {
			limit = {
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_11
				}
			}
			tooltip = { add_adk_effect = { add = 11 } }
			hidden_effect = { change_variable = { ancientDwarvenKnowledge = 11 } }
		}
		else_if = {
			limit = {
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_10
				}
			}
			tooltip = { add_adk_effect = { add = 10 } }
			hidden_effect = { change_variable = { ancientDwarvenKnowledge = 10 } }
		}
		else_if = {
			limit = {
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_9
				}
			}
			tooltip = { add_adk_effect = { add = 9 } }
			hidden_effect = { change_variable = { ancientDwarvenKnowledge = 9 } }

		}
		else_if = {
			limit = {
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_8
				}
			}
			tooltip = { add_adk_effect = { add = 8 } }
			hidden_effect = { change_variable = { ancientDwarvenKnowledge = 8 } }
		}
		else_if = {
			limit = {
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_7
				}
			}
			tooltip = { add_adk_effect = { add = 7 } }
			hidden_effect = { change_variable = { ancientDwarvenKnowledge = 7 } }
		}
		else_if = {
			limit = {
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_6
				}
			}
			tooltip = { add_adk_effect = { add = 6 } } #rifare localizzazion da qua
			hidden_effect = { change_variable = { ancientDwarvenKnowledge = 6 } }
		}
		else_if = {
			limit = {
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_5
				}
			}
			tooltip = { add_adk_effect = { add = 5 } }
			hidden_effect = { change_variable = { ancientDwarvenKnowledge = 5 } }
		}
		else_if = {
			limit = {
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_4
				}
			}
			tooltip = { add_adk_effect = { add = 4 } }
			hidden_effect = { change_variable = { ancientDwarvenKnowledge = 4 } }
		}
		else_if = {
			limit = {
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_3
				}
			}
			tooltip = { add_adk_effect = { add = 3 } }
			hidden_effect = { change_variable = { ancientDwarvenKnowledge = 3 } }
		}
		else_if = {
			limit = {
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_2
				}
			}
			tooltip = { add_adk_effect = { add = 2 } }
			hidden_effect = { change_variable = { ancientDwarvenKnowledge = 2 } }
		}
		else = {
			add_prestige = 10
		}
	}	
}

country_event = {
	id = DA_adk.40 #research facility periodical investment option for adk
	title = "DA_adk.40.t"
	desc = "DA_adk.40.d"
	picture = INVENTION_eventPicture

	trigger = {
		NOT = { has_country_modifier = DA_periodical_buy_ADK_CD }
		culture_group = dwarven
		capital_scope = {
			has_province_flag = DA_Expanded_dig_adk_4
		}	
	}	
	immediate = {
		hidden_effect = {
			add_country_modifier = {
				name = DA_periodical_buy_ADK_CD
				duration = 3650
				hidden = yes
			}
		}
	}
	
	mean_time_to_happen = {
		months = 220
		modifier = {
			factor = 0.9
			innovativeness = 30
		}
		modifier = {
			factor = 0.9
			innovativeness = 50
		}
		modifier = {
			factor = 0.9
			innovativeness = 70
		}
		modifier = {
			factor = 0.9
			innovativeness = 80
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
	}

	option = {
		name = "DA_adk.40.a"
		add_years_of_income = -0.1
		random_list = {
			33 = {
				modifier = {
					factor = 1.2
					innovativeness = 30
				}
				modifier = {
					factor = 1.2
					innovativeness = 50
				}
				modifier = {
					factor = 1.2
					innovativeness = 70
				}
				modifier = {
					factor = 1.25
					innovativeness = 90
				}
				modifier = {
					factor = 1.2
					stability = 3
				}
				modifier = {
					factor = 1.25
					has_estate_privilege = estate_DA_Runesmiths_patronage
				}
				country_event = {
					id = DA_adk.41
					days = 730
				}
			}
			67 = {

			}
		}
	}	
	option = {
		name = "DA_adk.40.b"
	}	
}

country_event = {
	id = DA_adk.41 #research facility investment returned
	title = "DA_adk.41.t"
	desc = "DA_adk.41.d"
	picture = INVENTION_eventPicture

	is_triggered_only = yes
	
	option = {
		name = "DA_adk.41.a"
		tooltip = { add_adk_effect = { add = 10 } }
		hidden_effect = { change_variable = { ancientDwarvenKnowledge = 10 } }
	}
}

country_event = {
	id = DA_adk.5 #unlocks great mage transformation, tier 0
	title = "DA_adk.5.t"
	desc = "DA_adk.5.d"
	picture = MAGIC_STUDY_AND_RELAX_eventPicture

	trigger = {
		culture_group = dwarven
		NOT = {	has_country_flag = DA_can_make_mage }
		capital_scope = {
			has_province_flag = DA_Expanded_dig_adk_3
		}	
	}	
	
	mean_time_to_happen = {
		months = 140
		modifier = {
			factor = 2
			NOT = { innovativeness = 10 }
		}
		modifier = {
			factor = 0.9
			innovativeness = 40
		}
		modifier = {
			factor = 0.9
			innovativeness = 60
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
		modifier = {
			factor = 0.75
			OR = {
				has_estate_privilege = estate_DA_Runesmiths_RF_8
				has_estate_privilege = estate_DA_Runesmiths_RF_10
				has_estate_privilege = estate_DA_Runesmiths_RF_11
			}
		}
	}

	option = {
		name = "DA_adk.5.a"
		custom_tooltip = DA_adk.5.tooltip
		hidden_effect = { set_country_flag = DA_can_make_mage }
	}	
}

country_event = {
	id = DA_adk.51 #unlocks enhanced great mage transformation, tier 1,2,3
	title = "DA_adk.51.t"
	desc = "DA_adk.51.d"
	picture = DA_research_facility_eventPicture

	trigger = {
		culture_group = dwarven
		OR = {
			AND = {
				has_country_flag = DA_can_make_mage
				NOT = {	has_country_flag = DA_can_make_mage_t1 }
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_4
				}
			}
			AND = {
				has_country_flag = DA_can_make_mage_t1
				NOT = {	has_country_flag = DA_can_make_mage_t2 }
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_6
				}
			}
			AND = {
				has_country_flag = DA_can_make_mage_t2
				NOT = {	has_country_flag = DA_can_make_mage_t3 }
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_8
				}
			}
		}
	}	
	
	mean_time_to_happen = {
		months = 140
		modifier = {
			factor = 2
			NOT = { innovativeness = 10 }
		}
		modifier = {
			factor = 0.9
			innovativeness = 40
		}
		modifier = {
			factor = 0.9
			innovativeness = 60
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
		modifier = {
			factor = 0.75
			OR = {
				has_estate_privilege = estate_DA_Runesmiths_RF_8
				has_estate_privilege = estate_DA_Runesmiths_RF_10
				has_estate_privilege = estate_DA_Runesmiths_RF_11
			}
		}
	}

	option = {
		name = "DA_adk.51.a"
		custom_tooltip = DA_adk.51.a.tt
		trigger = {
			has_country_flag = DA_can_make_mage
			NOT = {	has_country_flag = DA_can_make_mage_t1 }
			capital_scope = {
				has_province_flag = DA_Expanded_dig_adk_4
			}
		}
		hidden_effect = { set_country_flag = DA_can_make_mage_t1 }
	}	
	option = {
		name = "DA_adk.51.b"
		custom_tooltip = DA_adk.51.b.tt
		trigger = {
			has_country_flag = DA_can_make_mage_t1
			NOT = {	has_country_flag = DA_can_make_mage_t2 }
			capital_scope = {
				has_province_flag = DA_Expanded_dig_adk_6
			}
		}
		hidden_effect = { set_country_flag = DA_can_make_mage_t2 }
	}	
	option = {
		name = "DA_adk.51.c"
		custom_tooltip = DA_adk.51.c.tt
		trigger = {
			has_country_flag = DA_can_make_mage_t2
			NOT = {	has_country_flag = DA_can_make_mage_t3 }
			capital_scope = {
				has_province_flag = DA_Expanded_dig_adk_8
			}
		}
		hidden_effect = { set_country_flag = DA_can_make_mage_t3 }
	}	
}


country_event = {
	id = DA_adk.6 #ruler Becomes great mage
	title = "DA_adk.6.t"
	desc = "DA_adk.6.d"
	picture = DA_research_facility_eventPicture

	is_triggered_only = yes

	option = {
		name = "DA_adk.6.a"
		add_treasury = -10000
		hidden_effect = { subtract_variable = { ancientDwarvenKnowledge = 10 } }
		custom_tooltip = DA_adk.6.tooltip
		DA_great_mage_creation_process = yes
	}
	option = {
		name = "DA_adk.6.b"
	}
	after = {
		hidden_effect = {
			clr_country_flag = DA_rf_menu_in_use
		}
	}
}


country_event = {
	id = DA_adk.7 #unlocks Grafting new runes
	title = "DA_adk.7.t"
	desc = "DA_adk.7.d"
	picture = MAGIC_STUDY_AND_RELAX_eventPicture

	trigger = {
		culture_group = dwarven
		has_country_flag = DA_can_make_mage
		NOT = { has_country_flag = DA_can_graft_new_runes }
		capital_scope = {
			has_province_flag = DA_Expanded_dig_adk_4
		}	
	}	
	
	mean_time_to_happen = {
		months = 140
		modifier = {
			factor = 2
			NOT = { innovativeness = 10 }
		}
		modifier = {
			factor = 0.9
			innovativeness = 40
		}
		modifier = {
			factor = 0.9
			innovativeness = 60
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
		modifier = {
			factor = 0.75
			OR = {
				has_estate_privilege = estate_DA_Runesmiths_RF_8
				has_estate_privilege = estate_DA_Runesmiths_RF_10
				has_estate_privilege = estate_DA_Runesmiths_RF_11
			}
		}
	}

	option = {
		name = "DA_adk.7.a"
		custom_tooltip = DA_adk.7.tooltip
		hidden_effect = { set_country_flag = DA_can_graft_new_runes }
	}	
}

country_event = {
	id = DA_adk.8 #Graft New Runes on ruler
	title = "DA_adk.8.t"
	desc = "DA_adk.8.d"
	picture = BIG_BOOK_eventPicture

	is_triggered_only = yes

	option = {
		name = "DA_adk.8.a"
		add_treasury = -100
		hidden_effect = { subtract_variable = { ancientDwarvenKnowledge = 5 } }
		custom_tooltip = DA_adk.8.tooltip
		increase_study_experience = {
			experience = 200
		}
		hidden_effect = {
			add_country_modifier = {
				name = DA_Graft_runes_cooldown
				duration = 360
				hidden = yes
			}
		}
	}
	after = {
		hidden_effect = {
			clr_country_flag = DA_rf_menu_in_use
		}
	}	
}

country_event = {
	id = DA_adk.9 #unlocks Creating Rune Mages
	title = "DA_adk.9.t"
	desc = "DA_adk.9.d"
	picture = MAGIC_STUDY_AND_RELAX_eventPicture

	trigger = {
		culture_group = dwarven
		has_country_flag = DA_can_graft_new_runes
		NOT = { has_country_flag = DA_Can_create_leaders }
		capital_scope = {
			has_province_flag = DA_Expanded_dig_adk_5
		}	
	}	
	
	mean_time_to_happen = {
		months = 140
		modifier = {
			factor = 2
			NOT = { innovativeness = 10 }
		}
		modifier = {
			factor = 0.9
			innovativeness = 40
		}
		modifier = {
			factor = 0.9
			innovativeness = 60
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
		modifier = {
			factor = 0.75
			OR = {
				has_estate_privilege = estate_DA_Runesmiths_RF_8
				has_estate_privilege = estate_DA_Runesmiths_RF_10
				has_estate_privilege = estate_DA_Runesmiths_RF_11
			}
		}
	}

	option = {
		name = "DA_adk.9.a"
		custom_tooltip = DA_adk.9.tooltip
		hidden_effect = { set_country_flag = DA_Can_create_leaders }
	}	
}

country_event = {
	id = DA_adk.10 #Create Rune Mage
	title = "DA_adk.10.t"
	desc = "DA_adk.10.d"
	picture = BIG_BOOK_eventPicture

	is_triggered_only = yes

	option = {
		name = "DA_adk.10.a"
		add_treasury = -250
		add_mil_power = -50
		hidden_effect = { subtract_variable = { ancientDwarvenKnowledge = 5 } }
		custom_tooltip = DA_adk.10.tooltip
		DA_create_War_Rune_Mage_general_effect = yes
		if = {
			limit = { 
				has_estate_privilege = estate_DA_Obsidian_collab
			}
			custom_tooltip = DA_CD_4_tt
			add_country_modifier = {
				name = DA_Create_leader_cooldown
				duration = 1450
				hidden = yes
			}
		}
		else = {
			custom_tooltip = DA_CD_5_tt
			add_country_modifier = {
				name = DA_Create_leader_cooldown
				duration = 1825
				hidden = yes
			}
		}
		ai_chance = {
			factor = 5
		}
	}
	
	option = {
		name = "DA_adk.10.aM"
		highlight = yes
		trigger = {
			any_core_province = {
				province_id = 4236
				owned_by = root
				controlled_by = root
				has_great_project = {
					type = The_Dwarven_Workshop
					tier = 3
				}
			}
		}
		add_treasury = -350
		add_mil_power = -60
		hidden_effect = { subtract_variable = { ancientDwarvenKnowledge = 7 } }
		custom_tooltip = DA_adk.10M.tooltip
		DA_create_Mithril_rune_mage_effect = yes
		if = {
			limit = { 
				has_estate_privilege = estate_DA_Obsidian_collab
			}
			custom_tooltip = DA_CD_8_tt
			add_country_modifier = {
				name = DA_Create_leader_cooldown
				duration = 2920
				hidden = yes
			}
		}
		else = {
			custom_tooltip = DA_CD_10_tt
			add_country_modifier = {
				name = DA_Create_leader_cooldown
				duration = 3650
				hidden = yes
			}
		}
		ai_chance = {
			factor = 5
		}
	}
	option = {
		name = "DA_adk.10.b"
		add_treasury = -250
		add_mil_power = -50
		hidden_effect = { subtract_variable = { ancientDwarvenKnowledge = 5 } }
		custom_tooltip = DA_adk.10.tooltip
		DA_create_War_Rune_Mage_admiral_effect = yes
		if = {
			limit = { 
				has_estate_privilege = estate_DA_Obsidian_collab
			}
			custom_tooltip = DA_CD_4_tt
			add_country_modifier = {
				name = DA_Create_leader_cooldown
				duration = 1450
				hidden = yes
			}
		}
		else = {
			custom_tooltip = DA_CD_5_tt
			add_country_modifier = {
				name = DA_Create_leader_cooldown
				duration = 1825
				hidden = yes
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 5
				num_of_total_ports = 12
			}
		}
	}
	option = {
		name = "DA_adk.10.Go_back"
	}
	after = {
		hidden_effect = {
			clr_country_flag = DA_rf_menu_in_use
		}
	}	
}

country_event = {
	id = DA_adk.13 #unlocks dwarven runic barrier, tier 1
	title = "DA_adk.13.t"
	desc = "DA_adk.13.d"
	picture = BIG_BOOK_eventPicture

	trigger = {
		culture_group = dwarven
		NOT = { has_country_flag = DA_can_build_Runic_barrier }
		capital_scope = {
			has_province_flag = DA_Expanded_dig_adk_2
		}	
	}	
	
	mean_time_to_happen = {
		months = 140
		modifier = {
			factor = 2
			NOT = { innovativeness = 10 }
		}
		modifier = {
			factor = 0.9
			innovativeness = 40
		}
		modifier = {
			factor = 0.9
			innovativeness = 60
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
		modifier = {
			factor = 0.75
			OR = {
				has_estate_privilege = estate_DA_Runesmiths_RF_8
				has_estate_privilege = estate_DA_Runesmiths_RF_10
				has_estate_privilege = estate_DA_Runesmiths_RF_11
			}
		}
	}

	option = {
		name = "DA_adk.13.a"
		custom_tooltip = DA_adk.13.tooltip
		hidden_effect = { set_country_flag = DA_can_build_Runic_barrier }
	}	
}

country_event = {
	id = DA_adk.131 #unlocks dwarven runic barrier, tier 2, 3
	title = "DA_adk.131.t"
	desc = {
		trigger = {
			NOT = { has_country_flag = DA_can_build_Runic_barrier_t2 }
		}
		desc = "DA_adk.131.d2"
	}
	desc = {
		trigger = {
			has_country_flag = DA_can_build_Runic_barrier_t2
			NOT = { has_country_flag = DA_can_build_Runic_barrier_t3 }
		}
		desc = "DA_adk.131.d3"
	}
	picture = BIG_BOOK_eventPicture

	trigger = {
		culture_group = dwarven
		OR = {
			AND = {
				has_country_flag = DA_can_build_Runic_barrier
				NOT = { has_country_flag = DA_can_build_Runic_barrier_t2 }
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_4
				}
			}	
			AND = {
				has_country_flag = DA_can_build_Runic_barrier_t2
				NOT = { has_country_flag = DA_can_build_Runic_barrier_t3 }
				capital_scope = {
					has_province_flag = DA_Expanded_dig_adk_6
				}
			}	
		}
	}	
	
	mean_time_to_happen = {
		months = 150
		modifier = {
			factor = 2
			NOT = { innovativeness = 10 }
		}
		modifier = {
			factor = 0.9
			innovativeness = 40
		}
		modifier = {
			factor = 0.9
			innovativeness = 60
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
		modifier = {
			factor = 0.75
			OR = {
				has_estate_privilege = estate_DA_Runesmiths_RF_8
				has_estate_privilege = estate_DA_Runesmiths_RF_10
				has_estate_privilege = estate_DA_Runesmiths_RF_11
			}
		}
	}

	option = {
		name = "DA_adk.131.a"
		trigger = {
			NOT = { has_country_flag = DA_can_build_Runic_barrier_t2 }
		}
		custom_tooltip = DA_adk.131.a.tooltip
		hidden_effect = { set_country_flag = DA_can_build_Runic_barrier_t2 }
	}	
	option = {
		name = "DA_adk.131.b"
		trigger = {
			has_country_flag = DA_can_build_Runic_barrier_t2
			NOT = { has_country_flag = DA_can_build_Runic_barrier_t3 }
		}
		custom_tooltip = DA_adk.131.b.tooltip
		hidden_effect = { set_country_flag = DA_can_build_Runic_barrier_t3 }
	}	
}

country_event = {
	id = DA_adk.11 #unlocks runeforged fort
	title = "DA_adk.11.t"
	desc = "DA_adk.11.d"
	picture = BIG_BOOK_eventPicture

	trigger = {
		culture_group = dwarven
		has_country_flag = DA_can_build_Runic_barrier
		NOT = { has_country_flag = DA_can_build_runeforged_fort }
		capital_scope = {
			has_province_flag = DA_Expanded_dig_adk_5
		}	
	}	
	
	mean_time_to_happen = {
		months = 140
		modifier = {
			factor = 2
			NOT = { innovativeness = 10 }
		}
		modifier = {
			factor = 0.9
			innovativeness = 40
		}
		modifier = {
			factor = 0.9
			innovativeness = 60
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
		modifier = {
			factor = 0.75
			OR = {
				has_estate_privilege = estate_DA_Runesmiths_RF_8
				has_estate_privilege = estate_DA_Runesmiths_RF_10
				has_estate_privilege = estate_DA_Runesmiths_RF_11
			}
		}
	}

	option = {
		name = "DA_adk.11.a"
		custom_tooltip = DA_adk.11.tooltip
		hidden_effect = { set_country_flag = DA_can_build_runeforged_fort }
	}	
}

country_event = {
	id = DA_adk.12 #unlocks runeforged amldihr citadel
	title = "DA_adk.12.t"
	desc = "DA_adk.12.d"
	picture = BIG_BOOK_eventPicture

	trigger = {
		culture_group = dwarven
		has_country_flag = DA_can_build_runeforged_fort
		NOT = { has_country_flag = DA_can_build_Runeforged_Amldihr_fort }
		capital_scope = {
			province_id = 4119
			has_province_flag = DA_Expanded_dig_adk_6
		}	
	}	
	
	mean_time_to_happen = {
		months = 180
		modifier = {
			factor = 2
			NOT = { innovativeness = 10 }
		}
		modifier = {
			factor = 0.9
			innovativeness = 40
		}
		modifier = {
			factor = 0.8
			innovativeness = 60
		}
		modifier = {
			factor = 0.8
			innovativeness = 80
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
		modifier = {
			factor = 0.75
			OR = {
				has_estate_privilege = estate_DA_Runesmiths_RF_8
				has_estate_privilege = estate_DA_Runesmiths_RF_10
				has_estate_privilege = estate_DA_Runesmiths_RF_11
			}
		}
	}

	option = {
		name = "DA_adk.12.a"
		custom_tooltip = DA_adk.12.tooltip
		hidden_effect = { set_country_flag = DA_can_build_Runeforged_Amldihr_fort }
	}	
}

country_event = {
	id = DA_adk.14 #unlocks wolrd tree creation
	title = "DA_adk.14.t"
	desc = "DA_adk.14.d"
	picture = BIG_BOOK_eventPicture

	trigger = {
		owns_core_province = 874
		culture_group = dwarven
		has_country_flag = DA_can_graft_new_runes
		NOT = { has_country_flag = DA_can_Create_world_tree }
		capital_scope = {
			has_province_flag = DA_Expanded_dig_adk_7
		}	
	}	
	
	mean_time_to_happen = {
		months = 240
		modifier = {
			factor = 2
			NOT = { innovativeness = 10 }
		}
		modifier = {
			factor = 0.9
			innovativeness = 40
		}
		modifier = {
			factor = 0.9
			innovativeness = 60
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
		modifier = {
			factor = 0.75
			OR = {
				has_estate_privilege = estate_DA_Runesmiths_RF_8
				has_estate_privilege = estate_DA_Runesmiths_RF_10
				has_estate_privilege = estate_DA_Runesmiths_RF_11
			}
		}
	}

	option = {
		name = "DA_adk.14.a"
		custom_tooltip = DA_adk.14.tooltip
		hidden_effect = { set_country_flag = DA_can_Create_world_tree }
	}	
}

country_event = {
	id = DA_adk.15 #unlocks wolrd tree Branches
	title = "DA_adk.15.t"
	desc = "DA_adk.15.d"
	picture = BIG_BOOK_eventPicture

	trigger = {
		owns_core_province = 874
		culture_group = dwarven
		has_country_flag = DA_can_Create_world_tree
		NOT = { has_country_flag = DA_can_Transplant_world_tree }
		capital_scope = {
			has_province_flag = DA_Expanded_dig_adk_8
		}	
	}	
	
	mean_time_to_happen = {
		months = 312
		modifier = {
			factor = 2
			NOT = { innovativeness = 10 }
		}
		modifier = {
			factor = 0.9
			innovativeness = 40
		}
		modifier = {
			factor = 0.9
			innovativeness = 60
		}
		modifier = {
			factor = 0.9
			innovativeness = 80
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
		modifier = {
			factor = 0.75
			OR = {
				has_estate_privilege = estate_DA_Runesmiths_RF_8
				has_estate_privilege = estate_DA_Runesmiths_RF_10
				has_estate_privilege = estate_DA_Runesmiths_RF_11
			}
		}
	}

	option = {
		name = "DA_adk.15.a"
		custom_tooltip = DA_adk.15.tooltip
		hidden_effect = { set_country_flag = DA_can_Transplant_world_tree }
	}	
}

country_event = {
	id = DA_adk.16 #unlocks Creating Gates for tp
	title = "DA_adk.16.t"
	desc = "DA_adk.16.d"
	picture = MAGIC_STUDY_AND_RELAX_eventPicture

	trigger = {
		culture_group = dwarven
		has_country_flag = DA_can_build_Runic_barrier_t3
		NOT = { has_country_flag = DA_Can_create_Gates }
		capital_scope = {
			has_province_flag = DA_Expanded_dig_adk_8
		}	
	}	
	
	mean_time_to_happen = {
		months = 150
		modifier = {
			factor = 2
			NOT = { innovativeness = 10 }
		}
		modifier = {
			factor = 0.9
			innovativeness = 40
		}
		modifier = {
			factor = 0.9
			innovativeness = 60
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
		modifier = {
			factor = 0.75
			OR = {
				has_estate_privilege = estate_DA_Runesmiths_RF_8
				has_estate_privilege = estate_DA_Runesmiths_RF_10
				has_estate_privilege = estate_DA_Runesmiths_RF_11
			}
		}
	}
	option = {
		name = "DA_adk.16.a"
		custom_tooltip = DA_adk.16.tooltip
		hidden_effect = {
			set_country_flag = DA_Can_create_Gates
			DA_set_up_gate = yes
		}
	}	
}

country_event = {
	id = DA_adk.17 # Create Gate for tp
	title = "DA_adk.17.t"
	desc = "DA_adk.17.d"
	picture = DA_research_facility_eventPicture

	is_triggered_only = yes
	immediate = {
		random_core_province = {
			limit = {
				owned_by = root
				DA_has_dig_level_4_or_higher = yes
				NOT = { has_province_flag = DA_building_gate_in_prov }
				NOT = { has_province_modifier = DA_dwarven_TP_Gate }
			}
			save_event_target_as = DA_buildable_province1
		}
		random_core_province = {
			limit = {
				owned_by = root
				DA_has_dig_level_4_or_higher = yes
				NOT = { has_province_flag = DA_building_gate_in_prov }
				NOT = { has_province_modifier = DA_dwarven_TP_Gate }
				NOT = { province_id = event_target:DA_buildable_province1 }
			}
			save_event_target_as = DA_buildable_province2
		}
		random_core_province = {
			limit = {
				owned_by = root
				DA_has_dig_level_4_or_higher = yes
				NOT = { has_province_flag = DA_building_gate_in_prov }
				NOT = { has_province_modifier = DA_dwarven_TP_Gate }
				NOT = { province_id = event_target:DA_buildable_province1 }
				NOT = { province_id = event_target:DA_buildable_province2 }
			}
			save_event_target_as = DA_buildable_province3
		}
	}
	option = {
		name = "DA_adk.17.a"
		goto = DA_buildable_province1
		trigger = {
			event_target:DA_buildable_province1 = {
				owned_by = root
				DA_has_dig_level_4_or_higher = yes
				NOT = { has_province_flag = DA_building_gate_in_prov }
				NOT = { has_province_modifier = DA_dwarven_TP_Gate }
			}
		}
		add_treasury = -30000
		hidden_effect = { subtract_variable = { ancientDwarvenKnowledge = 5 } }
		custom_tooltip = DA_adk.17.tooltip
		hidden_effect = {
			event_target:DA_buildable_province1 = {
				set_province_flag = DA_building_gate_in_prov
			}
		}
	}
	option = {
		name = "DA_adk.17.b"
		goto = DA_buildable_province2
		trigger = {
			event_target:DA_buildable_province2 = {
				owned_by = root
				DA_has_dig_level_4_or_higher = yes
				NOT = { has_province_flag = DA_building_gate_in_prov }
				NOT = { has_province_modifier = DA_dwarven_TP_Gate }
			}
		}
		add_treasury = -30000
		hidden_effect = { subtract_variable = { ancientDwarvenKnowledge = 5 } }
		custom_tooltip = DA_adk.17.tooltip
		hidden_effect = {
			event_target:DA_buildable_province2 = {
				set_province_flag = DA_building_gate_in_prov
			}
		}
	}
	option = {
		name = "DA_adk.17.c"
		goto = DA_buildable_province3
		trigger = {
			event_target:DA_buildable_province3 = {
				owned_by = root
				DA_has_dig_level_4_or_higher = yes
				NOT = { has_province_flag = DA_building_gate_in_prov }
				NOT = { has_province_modifier = DA_dwarven_TP_Gate }
			}
		}
		add_treasury = -30000
		hidden_effect = { subtract_variable = { ancientDwarvenKnowledge = 5 } }
		custom_tooltip = DA_adk.17.tooltip
		hidden_effect = {
			event_target:DA_buildable_province3 = {
				set_province_flag = DA_building_gate_in_prov
			}
		}
	}
	option = {
		name = "DA_adk.17.e"
	}
	after = {
		clr_country_flag = DA_rf_menu_in_use
	}
}
province_event = {
	id = DA_adk.18 # Gate built
	title = "DA_adk.18.t"
	desc = "DA_adk.18.d"
	picture = DA_research_facility_eventPicture
	trigger = {
		had_province_flag = {
			flag = DA_building_gate_in_prov
			days = 700
		}
	}
	mean_time_to_happen = {
		days = 30
	}
	immediate = {
		hidden_effect = {
			clr_province_flag = DA_building_gate_in_prov
		}
	}
	option = {
		name = "DA_adk.18.a"
		add_permanent_province_modifier = {
			name = DA_dwarven_TP_Gate
			duration = -1
		}
	}
}

country_event = {
	id = DA_adk.19 # use Gates for tp, choose from
	title = "DA_adk.19.t"
	desc = "DA_adk.19.d"
	picture = DA_research_facility_eventPicture

	is_triggered_only = yes
	immediate = {
		random_core_province = {
			limit = {
				owned_by = root
				units_in_province = 1
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
			}
			save_event_target_as = DA_possible_tp1
		}
		random_core_province = {
			limit = {
				owned_by = root
				units_in_province = 1
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
				NOT = { province_id = event_target:DA_possible_tp1 }
			}
			save_event_target_as = DA_possible_tp2
		}
		random_core_province = {
			limit = {
				owned_by = root
				units_in_province = 1
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
				NOT = { province_id = event_target:DA_possible_tp1 }
				NOT = { province_id = event_target:DA_possible_tp2 }
			}
			save_event_target_as = DA_possible_tp3
		}
	}
	option = {
		name = "DA_adk.19.a"
		goto = DA_possible_tp1
		trigger = {
			event_target:DA_possible_tp1 = {
				owned_by = root
				units_in_province = 1
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
			}
		}
		custom_tooltip = DA_adk.19.tooltip
		hidden_effect = {
			event_target:DA_possible_tp1 = {
				save_global_event_target_as = DA_teleported_from
			}
		}
		country_event = {
			id = DA_adk.20
		}
	}
	option = {
		name = "DA_adk.19.b"
		goto = DA_possible_tp2
		trigger = {
			event_target:DA_possible_tp2 = {
				owned_by = root
				units_in_province = 1
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
			}
		}
		custom_tooltip = DA_adk.19.tooltip
		hidden_effect = {
			event_target:DA_possible_tp1 = {
				save_global_event_target_as = DA_teleported_from
			}
		}
		country_event = {
			id = DA_adk.20
		}
	}
	option = {
		name = "DA_adk.19.c"
		goto = DA_possible_tp3
		trigger = {
			event_target:DA_possible_tp3 = {
				owned_by = root
				units_in_province = 1
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
			}
		}
		custom_tooltip = DA_adk.19.tooltip
		hidden_effect = {
			event_target:DA_possible_tp3 = {
				save_global_event_target_as = DA_teleported_from
			}
		}
		country_event = {
			id = DA_adk.20
		}
	}
	option = {
		name = "DA_adk.19.e"
		clr_country_flag = DA_rf_menu_in_use
	}
}

country_event = {
	id = DA_adk.20 # use Gates for tp, choose where to
	title = "DA_adk.20.t"
	desc = "DA_adk.20.d"
	picture = DA_research_facility_eventPicture

	is_triggered_only = yes
	immediate = {
		random_core_province = {
			limit = {
				owned_by = root
				units_in_province = 1
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
				NOT = { province_id = event_target:DA_teleported_from }
			}
			save_event_target_as = DA_possible_tp_dest1
		}
		random_core_province = {
			limit = {
				owned_by = root
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
				NOT = { province_id = event_target:DA_teleported_from }
				NOT = { province_id = event_target:DA_possible_tp_dest1 }
			}
			save_event_target_as = DA_possible_tp_dest2
		}
		random_core_province = {
			limit = {
				owned_by = root
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
				NOT = { province_id = event_target:DA_teleported_from }
				NOT = { province_id = event_target:DA_possible_tp_dest1 }
				NOT = { province_id = event_target:DA_possible_tp_dest2 }
			}
			save_event_target_as = DA_possible_tp_dest3
		}
		random_core_province = {
			limit = {
				owned_by = root
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
				NOT = { province_id = event_target:DA_teleported_from }
				NOT = { province_id = event_target:DA_possible_tp_dest1 }
				NOT = { province_id = event_target:DA_possible_tp_dest2 }
				NOT = { province_id = event_target:DA_possible_tp_dest3 }
			}
			save_event_target_as = DA_possible_tp_dest4
		}
		random_core_province = {
			limit = {
				owned_by = root
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
				NOT = { province_id = event_target:DA_teleported_from }
				NOT = { province_id = event_target:DA_possible_tp_dest1 }
				NOT = { province_id = event_target:DA_possible_tp_dest2 }
				NOT = { province_id = event_target:DA_possible_tp_dest3 }
				NOT = { province_id = event_target:DA_possible_tp_dest4 }
			}
			save_event_target_as = DA_possible_tp_dest5
		}
	}
	option = {
		name = "DA_adk.20.a"
		goto = DA_possible_tp_dest1
		trigger = {
			event_target:DA_possible_tp_dest1 = {
				owned_by = root
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
				NOT = { province_id = event_target:DA_teleported_from }
			}
		}
		custom_tooltip = DA_adk.20.tooltip
		hidden_effect = {
			event_target:DA_possible_tp_dest1 = {
				save_event_target_as = DA_teleport_target
			}
			DA_save_army_composition = yes
		}
	}
	option = {
		name = "DA_adk.20.b"
		goto = DA_possible_tp_dest2
		trigger = {
			event_target:DA_possible_tp_dest2 = {
				owned_by = root
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
				NOT = { province_id = event_target:DA_teleported_from }
			}
		}
		custom_tooltip = DA_adk.20.tooltip
		hidden_effect = {
			event_target:DA_possible_tp_dest2 = {
				save_event_target_as = DA_teleport_target
			}
			DA_save_army_composition = yes
		}
	}
	option = {
		name = "DA_adk.20.c"
		goto = DA_possible_tp_dest3
		trigger = {
			event_target:DA_possible_tp_dest3 = {
				owned_by = root
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
				NOT = { province_id = event_target:DA_teleported_from }
			}
		}
		custom_tooltip = DA_adk.20.tooltip
		hidden_effect = {
			event_target:DA_possible_tp_dest3 = {
				save_event_target_as = DA_teleport_target
			}
			DA_save_army_composition = yes
		}
	}
	option = {
		name = "DA_adk.20.e"
		goto = DA_possible_tp_dest4
		trigger = {
			event_target:DA_possible_tp_dest4 = {
				owned_by = root
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
				NOT = { province_id = event_target:DA_teleported_from }
			}
		}
		custom_tooltip = DA_adk.20.tooltip
		hidden_effect = {
			event_target:DA_possible_tp_dest4 = {
				save_event_target_as = DA_teleport_target
			}
			DA_save_army_composition = yes
		}
	}
	option = {
		name = "DA_adk.20.f"
		goto = DA_possible_tp_dest5
		trigger = {
			event_target:DA_possible_tp_dest5 = {
				owned_by = root
				unit_in_battle = no
				has_siege = no
				has_province_modifier = DA_dwarven_TP_Gate
				NOT = { province_id = event_target:DA_teleported_from }
			}
		}
		custom_tooltip = DA_adk.20.tooltip
		hidden_effect = {
			event_target:DA_possible_tp_dest5 = {
				save_event_target_as = DA_teleport_target
			}
			DA_save_army_composition = yes
		}
	}
	option = {
		name = "DA_adk.20.go_back"
	}
	after = {
		DA_spawn_saved_army_composition = yes
		clr_country_flag = DA_rf_menu_in_use
	}
}

country_event = {
	id = DA_adk.103 #unlocks Opening runic gate
	title = "DA_adk.103.t"
	desc = "DA_adk.103.d"
	picture = BIG_BOOK_eventPicture

	trigger = {
		culture_group = dwarven
		NOT = {	has_country_flag = DA_can_open_Runic_gate }
		capital_scope = {
			has_province_flag = DA_Expanded_dig_adk_7
		}
		4119 = {
			has_province_flag = DA_Runic_gate_closed_p
			owned_by = root
		}
	}
	
	mean_time_to_happen = {
		months = 100
		modifier = {
			factor = 0.9
			innovativeness = 40
		}
		modifier = {
			factor = 0.9
			innovativeness = 60
		}
		modifier = {
			factor = 0.9
			stability = 3
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
		modifier = {
			factor = 0.75
			OR = {
				has_estate_privilege = estate_DA_Runesmiths_RF_8
				has_estate_privilege = estate_DA_Runesmiths_RF_10
				has_estate_privilege = estate_DA_Runesmiths_RF_11
			}
		}
	}

	option = {
		name = "DA_adk.103.a"
		custom_tooltip = DA_adk.103.tooltip
		hidden_effect = { set_country_flag = DA_can_open_Runic_gate }
	}	
}

country_event = {
	id = DA_adk.104 #Open Runic Gate
	title = "DA_adk.104.t"
	desc = "DA_adk.104.d"
	picture = BIG_STAR_IN_SKY_eventPicture

	is_triggered_only = yes

	option = {
		name = "DA_adk.104.a"
		add_treasury = -20000
		hidden_effect = { subtract_variable = { ancientDwarvenKnowledge = 30 } }
		custom_tooltip = DA_adk.104.tooltip
		add_country_modifier = {
			name = DA_Halanna_heart
			duration = -1
		}
	}
	after = {
		hidden_effect = {
			clr_country_flag = DA_rf_menu_in_use
			clr_country_flag = DA_can_open_Runic_gate
			4119 = {
				clr_province_flag = DA_Runic_gate_closed_p
				add_great_project = {
					type = Ancient_Research_facility1
					instant = no
				}
			}
		}
	}	
}


province_event = {		#er-natvir unlocks cr restoration
	id = DA_adk.105
	title = DA_adk.105.t
	desc = DA_adk.105.d
	picture = DA_research_facility_eventPicture
	
	fire_only_once = yes
	trigger = {
		culture_group = dwarven
		has_province_flag = DA_er_natvir_CR_found
		NOT = { has_province_flag = DA_er_natvir_CR_restorable }
		NOT = { has_province_flag = DA_er_natvir_CR_operational }
		owner = {
			culture_group = dwarven
			capital_scope = {
				has_province_flag = DA_Expanded_dig_adk_4
			}
		}
	}
	
	mean_time_to_happen = {
		months = 120
		modifier = {
			factor = 2
			owner = {
				NOT = { innovativeness = 10 }
			}
		}
		modifier = {
			factor = 0.9
			owner = {
				innovativeness = 70
			}
		}
		modifier = {
			factor = 0.9
			owner = {
				innovativeness = 50
			}
		}
		modifier = {
			factor = 0.9
			owner = {
				stability = 3
			}
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
		modifier = {
			factor = 0.75
			OR = {
				has_estate_privilege = estate_DA_Runesmiths_RF_8
				has_estate_privilege = estate_DA_Runesmiths_RF_10
				has_estate_privilege = estate_DA_Runesmiths_RF_11
			}
		}
	}

	option = {
		name = DA_adk.105.a
		custom_tooltip = DA_adk.105.tooltip
		hidden_effect = {
			set_province_flag = DA_er_natvir_CR_restorable
		}
	}
}


province_event = {
	id = DA_adk.106 # restore cr rail
	title = "DA_adk.106.t"
	desc = "DA_adk.106.d"
	picture = DA_research_facility_eventPicture

	is_triggered_only = yes

	option = {
		name = "DA_adk.106.a"
		owner = {
			add_treasury = -4000
			hidden_effect = { subtract_variable = { ancientDwarvenKnowledge = 10 } }
		}
		custom_tooltip = DA_adk.106.tooltip
	}
	after = {
		owner = {
			clr_country_flag = DA_rf_menu_in_use
		}
		clr_province_flag = DA_er_natvir_CR_restorable
		if = {
			limit = { has_province_flag = DA_already_has_cr }
			set_province_flag = DA_er_natvir_CR_operational
			
		}
		else = {
			add_province_triggered_modifier = DA_Er_Natvir_cr
			set_province_flag = DA_er_natvir_CR_operational
			set_province_flag = DA_already_has_cr
			every_province = {
				limit = {
					is_wasteland = no
					has_terrain = dwarven_road		
				}
				add_province_triggered_modifier = DA_CR_managed_railroad
			}
		}
	}
}

country_event = {
	id = DA_adk.107 # unlock fake mithril
	title = "DA_adk.107.t"
	desc = "DA_adk.107.d"
	picture = INVENTION_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = "DA_adk.107.a"
		custom_tooltip = DA_adk.107.tooltip
	}
}

province_event = {
	id = DA_adk.108 # unlock mithril guard
	title = "DA_adk.108.t"
	desc = "DA_adk.108.d"
	picture = INVENTION_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = "DA_adk.108.a"
		custom_tooltip = DA_adk.108.tooltip
		hidden_effect = {
			add_province_triggered_modifier = DA_pr_tr_mithril_guard
		}
	}	
}

province_event = {
	id = DA_adk.109 # Hehogrim Home restored
	title = "DA_adk.109.t"
	desc = "DA_adk.109.d"
	picture = DA_research_facility_eventPicture

	fire_only_once = yes
	trigger = {
		has_province_flag = DA_Hehogrim_home_found
		NOT = { has_province_modifier = DA_Hehogrim_workshop }
		province_id = 4078
		owner = {
			capital_scope = {
				has_province_flag = DA_Expanded_dig_adk_4
			}
		}
	}

	mean_time_to_happen = {
		months = 120
		modifier = {
			factor = 2
			owner = {
				NOT = { innovativeness = 10 }
			}
		}
		modifier = {
			factor = 0.9
			owner = {
				innovativeness = 70
			}
		}
		modifier = {
			factor = 0.9
			owner = {
				innovativeness = 50
			}
		}
		modifier = {
			factor = 0.9
			owner = {
				stability = 3
			}
		}
		modifier = {
			factor = 0.85
			has_estate_privilege = estate_DA_Runesmiths_patronage
		}
		modifier = {
			factor = 0.75
			OR = {
				has_estate_privilege = estate_DA_Runesmiths_RF_8
				has_estate_privilege = estate_DA_Runesmiths_RF_10
				has_estate_privilege = estate_DA_Runesmiths_RF_11
			}
		}
	}


	option = {
		name = "DA_adk.109.a"
		custom_tooltip = DA_adk.109.tooltip
		add_permanent_province_modifier = {
			name = DA_Hehogrim_workshop
			duration = -1
		}
	}
}
